{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile in the oob application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "username": {
          "type": "string",
          "description": "User's username."
        },
        "bio": {
          "type": "string",
          "description": "User's biography."
        },
        "readingList": {
          "type": "array",
          "description": "References to Articles saved by the user. (Relationship: UserProfile 1:N Article)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "email",
        "username"
      ]
    },
    "Article": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Article",
      "type": "object",
      "description": "Represents an article or post in the oob application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Article entity."
        },
        "authorId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N Article)"
        },
        "title": {
          "type": "string",
          "description": "Title of the article."
        },
        "content": {
          "type": "string",
          "description": "Full content of the article."
        },
        "summary": {
          "type": "string",
          "description": "Brief summary or excerpt of the article."
        },
        "publicationDate": {
          "type": "string",
          "description": "Date and time the article was published.",
          "format": "date-time"
        },
        "keywords": {
          "type": "array",
          "description": "Keywords associated with the article for search.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "authorId",
        "title",
        "content",
        "publicationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. Path-based ownership ensures that only the authenticated user can access their own profile. The 'userId' parameter corresponds to the Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/articles/{articleId}",
        "definition": {
          "entityName": "Article",
          "schema": {
            "$ref": "#/backend/entities/Article"
          },
          "description": "Stores article data.  The 'authorId' field specifies the author of the article. Open to the public for reading, but only the author can edit/delete based on the 'authorId' matching the request.auth.uid.",
          "params": [
            {
              "name": "articleId",
              "description": "The unique identifier for the article."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store user profiles and articles, prioritizing authorization independence and QAPs. User profiles are stored in `/users/{userId}`. Articles are stored in `/articles/{articleId}`.  The `authorId` field in the Article document establishes the relationship between the author and the article, enabling efficient queries for articles by a specific author. User's reading list is stored directly in the user profile document as array of references. This design eliminates the need for `get()` calls in security rules, simplifying the rules and improving performance.  It avoids hierarchical authorization dependencies, making security rules easier to write and maintain.  The structure segregates user data from articles, each having their own security posture."
  }
}